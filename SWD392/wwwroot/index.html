<!--<!DOCTYPE html>
<html>
<head>
    <title>Stripe Checkout Test</title>
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
    <div id="cart-items"></div>
    <button id="checkout-button">Checkout</button>

    <script>
        var stripe = Stripe('pk_test_51OsHZUGbEbQ0nPlDmozfqb0YVCLTp9jIhOZKwxbIDfYoQOR8yz5lyJdjTtRKN4mkOJVi2LDHAw86ksdapAFb3wUn00lnJawmvD'); // Replace with your Stripe public key

        // Fetch cart items from your server
        fetch('http://localhost:5272/cart.json', { method: 'GET' })
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                var cartItems = data.cart;
                var cartItemsDiv = document.getElementById('cart-items');
                if (Array.isArray(cartItems)) {
                    cartItems.forEach(function (item) {
                        var itemElement = document.createElement('p');
                        itemElement.textContent = item.item.Name + ' - ' + item.item.Type + ' - $' + item.item.Price + ' - Quantity: ' + item.Quantity;
                        cartItemsDiv.appendChild(itemElement);
                    });
                } else {
                    console.error('Error: cartItems is not an array');
                }
            })
            .catch(function (error) {
                console.error('Error:', error);
            });

        document.getElementById('checkout-button').addEventListener('click', function () {
            fetch('http://localhost:5272/create-checkout-session', { method: 'POST' })
                .then(function (response) {
                    return response.json();
                })
                .then(function (session) {
                    return stripe.redirectToCheckout({ sessionId: session.id });
                })
                .then(function (result) {
                    if (result.error) {
                        alert(result.error.message);
                    }
                })
                .catch(function (error) {
                    console.error('Error:', error);
                });
        });
    </script>
</body>
</html>-->
<!DOCTYPE html>
<html>
<head>
    <title>Artwork Store</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
    <h1>Artwork Store</h1>
    <div id="artworks"></div>
    <button id="checkout">Checkout</button>

    <script>
        $(document).ready(function () {
            $.get('http://localhost:5272/get-all-artworks', function (data) {
                data.forEach(function (artwork) {
                    $('#artworks').append(`
                            <div>
                                <h2>${artwork.name}</h2>
                                <img src="${artwork.imagePath}" width="200" height="200" />
                                <p>${artwork.description}</p>
                                <button onclick="addToCart(${artwork.id})">Add to Cart</button>
                            </div>
                        `);
                });
            });

            $('#checkout').click(function () {
                window.location.href = 'cart.html';
            });
        });

        function addToCart(id) {
            // Log the artwork id and data
            console.log('Artwork ID:', id);

            fetch(`http://localhost:5272/add-artwork-to-cart/${id}`, {
                method: 'POST',
                credentials: 'include' // Include cookies
            })
                .then(response => {
                    if (!response.ok) {
                        return response.text().then(text => { throw new Error(text); });
                    }
                    return response.json();
                })
                .then(data => {
                    alert('Artwork added to cart!');
                    // After successfully adding to cart, get the updated cart
                    fetch('http://localhost:5272/cart', {
                        credentials: 'include' // Include cookies
                    })
                        .then(response => response.json())
                        .then(cartData => {
                            console.log('Updated Cart:', cartData);
                            // Here you can update your cart UI with the new cartData
                        });
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }



/*        $.get('http://localhost:5272/cart', function (data) {
            console.log(data); // Log the cart data
        });*/
    </script>
</body>
</html>






